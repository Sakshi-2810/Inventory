<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Invoice</title>
  <style>
    body { font-family: Arial, sans-serif; font-size: 12px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background-color: #660DA7; color: #fff; text-align: center; }
    td { text-align: right; }
    .left { text-align: left; }
    .totals-table th, .totals-table td { text-align: right; }


    .invoice-info {
      text-align: left;
      font-size: 13px;
      color: #333;
      line-height: 1.5;
    }

    .invoice-info h2 {
      margin: 0;
      color: #000;
    }

    .invoice-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
<!--  border-bottom: 2px solid #660DA7;-->
  padding-bottom: 6px;
  margin-bottom: 10px;
  position: relative;
}

.company-details {
  position: absolute;
  top: 10px;   /* adjust as needed */
  right: 0;
  text-align: right;
  font-size: 12px;
  color: #555;
  line-height: 1.4;
}


    .company-details h4 {
      color: #660DA7;
      margin: 0;
      font-size: 14px;
    }

    hr {
      border: none;
      border-top: 2px solid #660DA7;
      margin: 15px 0;
    }
  </style>
</head>
<body>

<div class="invoice-header">
  <div class="invoice-info">
    <h2 style="text-align:center;">Invoice #<span th:text="${invoice.invoiceId}"></span></h2>
    <p><strong>Date:</strong> <span th:text="${invoice.date}"></span></p>
  </div>

  <div class="company-details">
    <h4>Firm Details</h4>
    <p th:utext="${gstDetails}"></p>
  </div>

</div>

<h3 th:text="|Billed to: ${invoice.partyName}|"
    th:if="${invoice.partyName != null and invoice.partyName != ''}"></h3>
<p>
  <span th:if="${partyAddress != null and partyAddress != ''}"
        th:text="${partyAddress}"></span><br th:if="${partyAddress != null and partyAddress != ''}">
  <span th:if="${partyPhone != null and partyPhone != ''}">
    Phone: <span th:text="${partyPhone}"></span><br>
  </span>
  <span th:if="${partyGstin != null and partyGstin != ''}">
    GSTIN: <span th:text="${partyGstin}"></span>
  </span>
</p>


<hr>

<table>
  <thead>
  <tr>
    <th>S.No</th>
    <th class="left">Item Name</th>
    <th>Qty</th>
    <th class="left">Unit</th>
    <th>Price</th>
    <th>GST (%)</th>
    <th>Total</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="bill, iterStat : ${invoice.stockBills}">
    <td th:text="${iterStat.index + 1}"></td>
    <td class="left" th:text="${bill.itemName}"></td>
    <td th:text="${#numbers.formatDecimal(bill.quantity, 0, 3)}"></td>
    <td class="left" th:text="${bill.unit}"></td>
    <td th:text="${bill.price}"></td>
    <td th:text="${bill.gst}"></td>
    <td th:text="${T(java.lang.Math).round((bill.quantity * bill.price) * (100 + bill.gst) / 100)}"></td>
  </tr>
  </tbody>
</table>

<table class="totals-table">
  <thead>
  <tr>
    <th>Subtotal</th>
    <th>CGST</th>
    <th>SGST</th>
    <th>Discount</th>
    <th>Total</th>
    <th>Paid</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>₹ <span th:text="${invoice.subTotal}"></span></td>
    <td>₹ <span th:text="${halfTax}"></span></td>
    <td>₹ <span th:text="${halfTax}"></span></td>
    <td><span th:text="${formattedDiscount}"></span></td>
    <td style="font-weight:700;color:#660DA7;">₹ <span th:text="${invoice.totalCost}"></span></td>
    <td>₹ <span th:text="${invoice.paidAmount}"></span></td>
  </tr>
  </tbody>
</table>
</body>
</html>
